"use strict";exports.__esModule=true;exports.observeLayoutShift=observeLayoutShift;exports.observeLargestContentfulPaint=observeLargestContentfulPaint;exports.observePaint=observePaint;function isTypeSupported(type){if(self.PerformanceObserver&&PerformanceObserver.supportedEntryTypes){return PerformanceObserver.supportedEntryTypes.includes(type);}return false;}function observeLayoutShift(onPerfEntry){if(isTypeSupported('layout-shift')){var cumulativeScore=0;var observer=new PerformanceObserver(list=>{for(var entry of list.getEntries()){// Only count layout shifts without recent user input.
if(!entry.hadRecentInput){cumulativeScore+=entry.value;}}});observer.observe({type:'layout-shift',buffered:true});document.addEventListener('visibilitychange',function clsObserver(){if(document.visibilityState==='hidden'){// Force any pending records to be dispatched.
observer.takeRecords();observer.disconnect();removeEventListener('visibilitychange',clsObserver,true);onPerfEntry({name:'cumulative-layout-shift',value:cumulativeScore});}},true);}}function observeLargestContentfulPaint(onPerfEntry){if(isTypeSupported('largest-contentful-paint')){// Create a variable to hold the latest LCP value (since it can change).
var lcp;// Create the PerformanceObserver instance.
var observer=new PerformanceObserver(entryList=>{var entries=entryList.getEntries();var lastEntry=entries[entries.length-1];lcp=lastEntry.renderTime||lastEntry.loadTime;});observer.observe({type:'largest-contentful-paint',buffered:true});document.addEventListener('visibilitychange',function lcpObserver(){if(lcp&&document.visibilityState==='hidden'){removeEventListener('visibilitychange',lcpObserver,true);onPerfEntry({name:'largest-contentful-paint',value:lcp});}},true);}}function observePaint(onPerfEntry){var observer=new PerformanceObserver(list=>{list.getEntries().forEach(onPerfEntry);});observer.observe({type:'paint',buffered:true});}