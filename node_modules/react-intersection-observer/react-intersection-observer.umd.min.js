!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactIntersectionObserver={},e.React)}(this,(function(e,t){"use strict";function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){if(!e)throw new Error("Invariant failed")}var s=new Map,a=new Map,c=new Map,h=0;function d(e,t,r){void 0===r&&(r={}),r.threshold||(r.threshold=0);var n=r,o=n.root,d=n.rootMargin,u=n.threshold;if(s.has(e)&&(process.env.NODE_ENV,i(!1)),e){var f=function(e){return e?c.has(e)?c.get(e):(h+=1,c.set(e,h.toString()),c.get(e)+"_"):""}(o)+(d?u.toString()+"_"+d:u.toString()),p=a.get(f);p||(p=new IntersectionObserver(l,r),f&&a.set(f,p));var v={callback:t,element:e,inView:!1,observerId:f,observer:p,thresholds:p.thresholds||(Array.isArray(u)?u:[u])};return s.set(e,v),p.observe(e),v}}function u(e){if(e){var t=s.get(e);if(t){var r=t.observerId,n=t.observer,o=n.root;n.unobserve(e);var i=!1,a=!1;r&&s.forEach((function(t,n){n!==e&&(t.observerId===r&&(i=!0,a=!0),t.observer.root===o&&(a=!0))})),!a&&o&&c.delete(o),n&&!i&&n.disconnect(),s.delete(e)}}}function l(e){e.forEach((function(e){var t=e.isIntersecting,r=e.intersectionRatio,n=e.target,o=s.get(n);if(o&&r>=0){var i=o.thresholds.some((function(e){return o.inView?r>e:r>=e}));void 0!==t&&(i=i&&t),o.inView=i,o.callback(i,e)}}))}var f=function(e){var s,a;function c(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r(o(t=e.call.apply(e,[this].concat(i))||this),"state",{inView:!1,entry:void 0}),r(o(t),"node",null),r(o(t),"handleNode",(function(e){t.node&&(u(t.node),e||t.props.triggerOnce||t.setState({inView:!1,entry:void 0})),t.node=e||null,t.observeNode()})),r(o(t),"handleChange",(function(e,r){(e!==t.state.inView||e)&&t.setState({inView:e,entry:r}),t.props.onChange&&t.props.onChange(e,r)})),t}a=e,(s=c).prototype=Object.create(a.prototype),s.prototype.constructor=s,s.__proto__=a;var h=c.prototype;return h.componentDidMount=function(){this.node||(process.env.NODE_ENV,i(!1))},h.componentDidUpdate=function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||(u(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&(u(this.node),this.node=null)},h.componentWillUnmount=function(){this.node&&(u(this.node),this.node=null)},h.observeNode=function(){if(this.node){var e=this.props,t=e.threshold,r=e.root,n=e.rootMargin;d(this.node,this.handleChange,{threshold:t,root:r,rootMargin:n})}},h.render=function(){var e=this.state,r=e.inView,o=e.entry;if(!function(e){return"function"!=typeof e.children}(this.props))return this.props.children({inView:r,entry:o,ref:this.handleNode});var i=this.props,s=i.children,a=i.as,c=i.tag,h=(i.triggerOnce,i.threshold,i.root,i.rootMargin,i.onChange,function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(i,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange"]));return t.createElement(a||c||"div",n({ref:this.handleNode},h),s)},c}(t.Component);r(f,"displayName","InView"),r(f,"defaultProps",{threshold:0,triggerOnce:!1});var p={inView:!1,entry:void 0};e.InView=f,e.default=f,e.useInView=function(e){void 0===e&&(e={});var r=t.useRef(),n=t.useState(p),o=n[0],i=n[1];return[t.useCallback((function(t){r.current&&(u(r.current),e.triggerOnce||i(p)),t&&d(t,(function(r,n){i({inView:r,entry:n}),r&&e.triggerOnce&&u(t)}),e),r.current=t}),[e.threshold,e.root,e.rootMargin,e.triggerOnce]),o.inView,o.entry]},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-intersection-observer.umd.min.js.map
